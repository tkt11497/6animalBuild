window.__require=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){return o(t[s][1][e]||e)},h,h.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<r.length;s++)o(r[s]);return o}({"bet-amount":[function(e,t,n){"use strict";cc._RF.push(t,"b5a18Da77dJCK8T8N/FkCP9","bet-amount"),cc.Class({extends:cc.Component,properties:{node20:{default:null,type:cc.Prefab},node30:{default:null,type:cc.Prefab},node50:{default:null,type:cc.Prefab}},onLoad:function(){},start:function(){},init:function(){var e=this;this.childcoin20=cc.instantiate(this.node20),this.node.addChild(this.childcoin20),this.childcoin20.setPosition(0,0),this.childcoin20.runAction(cc.moveTo(1,-98.507,38.806)),this.childcoin30=cc.instantiate(this.node30),this.node.addChild(this.childcoin30),this.childcoin30.setPosition(0,0),this.childcoin30.runAction(cc.moveTo(1,-2.277,84.404)),this.childcoin50=cc.instantiate(this.node50),this.node.addChild(this.childcoin50),this.childcoin50.setPosition(0,0),this.childcoin50.runAction(cc.moveTo(1,94.737,41.121)),this.childcoin20.on("coin20",function(t){console.log(t),e.node.emit("betamount",20),e.remove()}),this.childcoin30.on("coin30",function(t){console.log(t),e.node.emit("betamount",30),e.remove()}),this.childcoin50.on("coin50",function(t){console.log(t),e.node.emit("betamount",50),e.remove()})},remove:function(){this.node.removeAllChildren()}}),cc._RF.pop()},{}],"bet-coin":[function(e,t,n){"use strict";cc._RF.push(t,"567bffbrUtOkLj2FQGRiXWJ","bet-coin"),cc.Class({extends:cc.Component,properties:{coin:{default:null,type:cc.Prefab}},onLoad:function(){},init:function(e){this.node.setPosition(cc.v2(-170.149,189.552)),this.addCoin(),this.moving(e)},start:function(){},addCoin:function(){var e=cc.instantiate(this.coin);this.node.addChild(e),e.setPosition(0,0)},moving:function(e){switch(e){case"elephant":this.node.runAction(cc.moveTo(1,-122.388,97.015));break;case"tiger":this.node.runAction(cc.moveTo(1,5.97,97.015));break;case"chicken":this.node.runAction(cc.moveTo(1,135.821,97.015));break;case"elephant-fish":this.node.runAction(cc.moveTo(1,-122.444,44.856));break;case"elephant-tiger":this.node.runAction(cc.moveTo(1,-58.191,98.198));break;case"tiger-chicken":this.node.runAction(cc.moveTo(1,71.527,98.198));break;case"fish":this.node.runAction(cc.moveTo(1,-122.388,-7.463));break;case"fish-tortoise":this.node.runAction(cc.moveTo(1,-56.979,-7.274));break;case"tortoise":this.node.runAction(cc.moveTo(1,7.463,-7.463));break;case"tiger-tortoise":this.node.runAction(cc.moveTo(1,8.486,43.643));break;case"chicken-prawn":this.node.runAction(cc.moveTo(1,136.992,44.856));break;case"tortoise-prawn":this.node.runAction(cc.moveTo(1,71.239,-4.547));break;case"prawn":this.node.runAction(cc.moveTo(1,134.328,-7.463));break;case"elephant-tiger1":this.node.runAction(cc.moveTo(1,-132.836,-91.045));break;case"tiger-tortoise1":this.node.runAction(cc.moveTo(1,-132.836,-143.284));break;case"fish-prawn":this.node.runAction(cc.moveTo(1,-40.298,-91.045));break;case"chicken-fish":this.node.runAction(cc.moveTo(1,-38.806,-143.284));break;case"elephant-tortoise":this.node.runAction(cc.moveTo(1,53.731,-91.044));break;case"elephant-fish1":this.node.runAction(cc.moveTo(1,55.224,-141.791));break;case"chicken-prawn1":this.node.runAction(cc.moveTo(1,144.776,-91.045));break;case"tiger-prawn":this.node.runAction(cc.moveTo(1,147.761,-140.298))}cc.log("mvoing")}}),cc._RF.pop()},{}],"bet-picker":[function(e,t,n){"use strict";cc._RF.push(t,"5ed0aBAJHRJgJ8T9SeW2CtT","bet-picker"),cc.Class({extends:cc.Component,properties:{coin20:{default:null,type:cc.SpriteFrame},coin30:{default:null,type:cc.SpriteFrame},coin50:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.sprite=this.node.getComponent(cc.Sprite)},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("changeBet"),console.log("change bet")})},changeSprite:function(e){switch(e){case 20:this.sprite.spriteFrame=this.coin20;break;case 30:this.sprite.spriteFrame=this.coin30;break;case 50:this.sprite.spriteFrame=this.coin50}}}),cc._RF.pop()},{}],"chicken-prawn":[function(e,t,n){"use strict";cc._RF.push(t,"895830hZ/NNrIxcQ88ZGBcz","chicken-prawn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[2,5])})}}),cc._RF.pop()},{}],chicken:[function(e,t,n){"use strict";cc._RF.push(t,"ba7e2OLQEhHsaCgrowN93ss","chicken"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",2)})}}),cc._RF.pop()},{}],coin20:[function(e,t,n){"use strict";cc._RF.push(t,"f3d65Y9YihJWI58kOM8nxzV","coin20"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("coin20",20),console.log("coinn 200 is touched")})}}),cc._RF.pop()},{}],coin30:[function(e,t,n){"use strict";cc._RF.push(t,"06023SQ/stBH57Ale16YlRL","coin30"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("coin30",30),console.log("coinn 30 is touched")})}}),cc._RF.pop()},{}],coin50:[function(e,t,n){"use strict";cc._RF.push(t,"5afd4fk0JhLQqqfwwy+7E/S","coin50"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("coin50",50),console.log("coinn 50 is touched")})}}),cc._RF.pop()},{}],colyseus:[function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=o(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,s=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"10b78beYMlI5b9iub9tzpGx","colyseus"),function(e,r){"object"==(void 0===n?"undefined":s(n))&&"object"==(void 0===t?"undefined":s(t))?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==(void 0===n?"undefined":s(n))?n.Colyseus=r():e.Colyseus=r()}(self||void 0,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.apply(this,n)||this;return Object.setPrototypeOf(o,Object.create(t.prototype)),Object.defineProperties(o,{$sorting:{value:void 0,enumerable:!1,writable:!0},$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},triggerAll:{value:function(){if(o.onAdd)for(var e=0;e<o.length;e++)o.onAdd(o[e],e)}},toJSON:{value:function(){for(var e=[],t=0;t<o.length;t++){var n=o[t];e.push("function"==typeof n.toJSON?n.toJSON():n)}return e}},clone:{value:function(e){var n;return e?((n=t.of.apply(t,o)).onAdd=o.onAdd,n.onRemove=o.onRemove,n.onChange=o.onChange):n=new(t.bind.apply(t,i([void 0],o.map(function(e){return"object"==s(e)?e.clone():e})))),n}}}),o}return o(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!0,configurable:!0}),t.prototype.sort=function(t){if(this.$sorting=!0,e.prototype.sort.call(this,t),this.$changes)for(var n=0,r=Array.from(this.$changes.changes);n<r.length;n++){var o=r[n],i=this.$changes.getIndex(this[o]);void 0!==i&&this.$changes.mapIndexChange(this[o],i),this.$changes.mapIndex(this[o],o)}return this.$sorting=!1,this},t.prototype.filter=function(t,n){var r=e.prototype.filter.call(this,t);return r.$changes=this.$changes.clone(),r},t.prototype.splice=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=Array.prototype.splice.apply(this,arguments),i=Array.prototype.filter.call(this,function(n,r){return r>=e+t-1});return o.map(function(e){var t=e&&e.$changes;t&&(t.parent.deleteIndex(e),delete t.parent)}),i.forEach(function(e){var t=e&&e.$changes;t&&t.parentField--}),o},t}(Array);t.ArraySchema=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.MapSchema=function e(t){var n=this;for(var r in void 0===t&&(t={}),t)this[r]=t[r];Object.defineProperties(this,{$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},clone:{value:function(t){var r;if(t)(r=Object.assign(new e,n)).onAdd=n.onAdd,r.onRemove=n.onRemove,r.onChange=n.onChange;else{var o=new e;for(var i in n)"object"==s(n[i])?o[i]=n[i].clone():o[i]=n[i]}return r}},triggerAll:{value:function(){if(n.onAdd)for(var e in n)n.onAdd(n[e],e)}},toJSON:{value:function(){var e={};for(var t in n)e[t]="function"==typeof n[t].toJSON?n[t].toJSON():n[t];return e}},_indexes:{value:new Map,enumerable:!1,writable:!0},_updateIndexes:{value:function(e){for(var t=0,r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.set(s,t++)}n._indexes=r}}})}},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=n(8),c=n(9),u=n(0),h=n(1),f=n(13),l=n(35),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(Error);function d(e,t,n,r){if(!(e instanceof t))throw new p("a '"+t.name+"' was expected, but '"+e.constructor.name+"' was provided in "+n.constructor.name+"#"+r)}function v(e,t,n,r,o){!function(e,t,n,r){var o,i=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":o="number",isNaN(e)&&console.log('trying to encode "NaN" in '+n.constructor.name+"#"+r);break;case"string":o="string",i=!0;break;case"boolean":return}if(s(e)!==o&&(!i||i&&null!==e)){var a="'"+JSON.stringify(e)+"'"+(e&&e.constructor&&" ("+e.constructor.name+")");throw new p("a '"+o+"' was expected, but "+a+" was provided in "+n.constructor.name+"#"+r)}}(n,e,r,o);var i=a[e];if(!i)throw new p("a '"+e+"' was expected, but "+n+" was provided in "+r.constructor.name+"#"+o);i(t,n)}function y(e,t,n){return c[e](t,n)}var g=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new f.ChangeTree(this._indexes),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var n=this._descriptors;n&&Object.defineProperties(this,n)}return e.onError=function(e){console.error(e)},Object.defineProperty(e.prototype,"_schema",{get:function(){return this.constructor._schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_descriptors",{get:function(){return this.constructor._descriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_indexes",{get:function(){return this.constructor._indexes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_fieldsByIndex",{get:function(){return this.constructor._fieldsByIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_filters",{get:function(){return this.constructor._filters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_deprecated",{get:function(){return this.constructor._deprecated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$changed",{get:function(){return this.$changes.changed},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t){var n=this;return this.$listeners[e]||(this.$listeners[e]=new l.EventEmitter),this.$listeners[e].register(t),function(){return n.$listeners[e].remove(t)}},e.prototype.decode=function(t,n){void 0===n&&(n={offset:0});var r=[],o=this._schema,s=this._fieldsByIndex,a=t.length;t[n.offset]===i.TYPE_ID&&(n.offset+=2);for(var f=function(){var a=c.nilCheck(t,n)&&++n.offset,f=t[n.offset++];if(f===i.END_OF_STRUCTURE)return"break";var p=s[f],d="_"+p,v=o[p],g=void 0,_=!1;if(!p)return"continue";if(a)g=null,_=!0;else if(v._schema)(g=l[d]||l.createTypeInstance(t,n,v)).decode(t,n),_=!0;else if(Array.isArray(v)){v=v[0];var m=l[d]||new u.ArraySchema;g=m.clone(!0);var b=c.number(t,n),w=Math.min(c.number(t,n),b),C=g.length>b;_=w>0||C;var A=!1;C&&Array.prototype.splice.call(g,b).forEach(function(t,n){if(t&&t.onRemove)try{t.onRemove()}catch(t){e.onError(t)}if(m.onRemove)try{m.onRemove(t,b+n)}catch(t){e.onError(t)}});for(var O=0;O<w;O++){var k=c.number(t,n),E=void 0;c.indexChangeCheck(t,n)&&(c.uint8(t,n),E=c.number(t,n),A=!0);var S=!A&&void 0===g[k]||A&&void 0===E;if(v.prototype instanceof e){var R=void 0;(R=S?l.createTypeInstance(t,n,v):void 0!==E?m[E]:m[k])||(R=l.createTypeInstance(t,n,v),S=!0),R.decode(t,n),g[k]=R}else g[k]=y(v,t,n);if(S){if(m.onAdd)try{m.onAdd(g[k],k)}catch(t){e.onError(t)}}else if(m.onChange)try{m.onChange(g[k],k)}catch(t){e.onError(t)}}}else if(v.map){v=v.map;var M=l[d]||new h.MapSchema;g=M.clone(!0);var P=c.number(t,n);_=P>0,A=!1;var T=Object.keys(M);for(O=0;O<P&&void 0!==t[n.offset]&&t[n.offset]!==i.END_OF_STRUCTURE;O++){var I=c.nilCheck(t,n)&&++n.offset,x=void 0;c.indexChangeCheck(t,n)&&(c.uint8(t,n),x=T[c.number(t,n)],A=!0);var N=c.numberCheck(t,n),j="string"!=typeof v,F=N?T[c.number(t,n)]:c.string(t,n);if(R=void 0,R=(S=!A&&void 0===M[F]||A&&void 0===x&&N)&&j?l.createTypeInstance(t,n,v):void 0!==x?M[x]:M[F],I){if(R&&R.onRemove)try{R.onRemove()}catch(t){e.onError(t)}if(M.onRemove)try{M.onRemove(R,F)}catch(t){e.onError(t)}delete g[F]}else if(j?(R.decode(t,n),g[F]=R):g[F]=y(v,t,n),S){if(M.onAdd)try{M.onAdd(g[F],F)}catch(t){e.onError(t)}}else if(M.onChange)try{M.onChange(g[F],F)}catch(t){e.onError(t)}}}else _=(g=y(v,t,n))!==l[d];_&&(l.onChange||l.$listeners[p])&&r.push({field:p,value:g,previousValue:l[d]}),l[d]=g},l=this;n.offset<a&&"break"!==f(););return this._triggerChanges(r),this},e.prototype.encode=function(e,t,n,r){var o=this;if(void 0===e&&(e=this),void 0===t&&(t=!1),void 0===r&&(r=[]),!this.$changes.changed&&!t)return this._encodeEndOfStructure(this,e,r),r;for(var s=this._schema,c=this._indexes,f=this._fieldsByIndex,l=this._filters,p=Array.from(t?this.$changes.allChanges:this.$changes.changes).sort(),y=function(y,_){var m=f[p[y]]||p[y],b="_"+m,w=s[m],C=l&&l[m],A=g[b],O=c[m];if(void 0===A)a.uint8(r,i.NIL),a.number(r,O);else if(w._schema){if(n&&C&&!C.call(g,n,A,e))return"continue";A?(a.number(r,O),d(A,w,g,m),g.tryEncodeTypeId(r,w,A.constructor),A.encode(e,t,n,r)):(a.uint8(r,i.NIL),a.number(r,O))}else if(Array.isArray(w)){var k=A.$changes;if(n&&C&&!C.call(g,n,A,e))return"continue";a.number(r,O),a.number(r,A.length);var E=Array.from(t?k.allChanges:k.changes).filter(function(e){return void 0!==o[b][e]}).sort(function(e,t){return e-t}),S=E.length;a.number(r,S);var R="string"!=typeof w[0];d(g[b],u.ArraySchema,g,m);for(var M=0;M<S;M++){var P=E[M],T=g[b][P];R?(a.number(r,P),t||void 0!==(D=k.getIndexChange(T))&&(a.uint8(r,i.INDEX_CHANGE),a.number(r,D)),d(T,w[0],g,m),g.tryEncodeTypeId(r,w[0],T.constructor),T.encode(e,t,n,r)):void 0!==T&&(a.number(r,P),v(w[0],r,T,g,m))}t||n||k.discard()}else if(w.map){if(k=A.$changes,n&&C&&!C.call(g,n,A,e))return"continue";a.number(r,O);var I=Array.from(t?k.allChanges:k.changes);a.number(r,I.length);var x=Array.from(k.allChanges);R="string"!=typeof w.map,S=I.length,d(g[b],h.MapSchema,g,m);for(var N=0;N<S;N++){var j=I[N],F=void(T=g[b][j]);if(t){if(void 0===T)continue}else{var D=k.getIndexChange(T);T&&void 0!==D&&(a.uint8(r,i.INDEX_CHANGE),a.number(r,g[b]._indexes.get(D))),F=k.isDeleted(j)&&T?void 0:g[b]._indexes.get(j)}var U=void 0===T;U&&a.uint8(r,i.NIL),void 0!==F?a.number(r,F):a.string(r,j),T&&R?(d(T,w.map,g,m),g.tryEncodeTypeId(r,w.map,T.constructor),T.encode(e,t,n,r)):U||v(w.map,r,T,g,m)}t||n||(k.discard(),g[b]._updateIndexes(x))}else{if(n&&C&&!C.call(g,n,A,e))return"continue";a.number(r,O),v(w,r,A,g,m)}},g=this,_=0,m=p.length;_<m;_++)y(_);return this._encodeEndOfStructure(this,e,r),t||n||this.$changes.discard(),r},e.prototype.encodeFiltered=function(e,t){return this.encode(this,!1,e,t)},e.prototype.encodeAll=function(e){return this.encode(this,!0,void 0,e)},e.prototype.encodeAllFiltered=function(e,t){return this.encode(this,!0,e,t)},e.prototype.clone=function(){var e=new this.constructor,t=this._schema;for(var n in t)"object"==s(this[n])&&"function"==typeof this[n].clone?e[n]=this[n].clone():e[n]=this[n];return e},e.prototype.triggerAll=function(){var t=[],n=this._schema;for(var r in n)void 0!==this[r]&&t.push({field:r,value:this[r],previousValue:void 0});try{this._triggerChanges(t)}catch(t){e.onError(t)}},e.prototype.toJSON=function(){var e=this._schema,t=this._deprecated,n={};for(var r in e)t[r]||null===this[r]||void 0===this[r]||(n[r]="function"==typeof this[r].toJSON?this[r].toJSON():this["_"+r]);return n},e.prototype.discardAllChanges=function(){var t=this._schema,n=Array.from(this.$changes.changes),r=this._fieldsByIndex;for(var o in n){var i=r[o],s=t[i],a=this[i];if(void 0!==a)if(s._schema)a.discardAllChanges();else if(Array.isArray(s)){for(var c=0,u=a.length;c<u;c++){var h=a[c],f=this["_"+i][h];"string"!=typeof s[0]&&f&&f.discardAllChanges()}a.$changes.discard()}else if(s.map){var l=a,p=Object.keys(this["_"+i]);for(c=0;c<l.length;c++){var d=p[l[c]]||l[c];(f=this["_"+i][d])instanceof e&&f&&f.discardAllChanges()}a.$changes.discard()}}this.$changes.discard()},e.prototype._encodeEndOfStructure=function(e,t,n){e!==t&&n.push(i.END_OF_STRUCTURE)},e.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(a.uint8(e,i.TYPE_ID),a.uint8(e,n._typeid))},e.prototype.createTypeInstance=function(e,t,n){return e[t.offset]===i.TYPE_ID?(t.offset++,new(this.constructor._context.get(c.uint8(e,t)))):new n},e.prototype._triggerChanges=function(t){if(t.length>0){for(var n=0;n<t.length;n++){var r=t[n],o=this.$listeners[r.field];if(o)try{o.invoke(r.value,r.previousValue)}catch(t){e.onError(t)}}if(this.onChange)try{this.onChange(t)}catch(t){e.onError(t)}}},e}();t.Schema=g},function(e,t){function n(e,t){t.headers=e.headers||{},t.statusMessage=e.statusText,t.statusCode=e.status,t.data=e.response}t.send=function(e,t,r){return new Promise(function(o,i){var a,c,u,h;r=r||{};var f=new XMLHttpRequest,l=r.headers||{};for(a in r.timeout&&(f.timeout=r.timeout),f.ontimeout=f.onerror=function(e){e.timeout="timeout"==e.type,i(e)},f.open(e,t.href||t),f.onload=function(){for(h=f.getAllResponseHeaders().trim().split(/[\r\n]+/),n(f,f);u=h.shift();)u=u.split(": "),f.headers[u.shift().toLowerCase()]=u.join(": ");if((u=f.headers["content-type"])&&~u.indexOf("application/json"))try{f.data=JSON.parse(f.data,r.reviver)}catch(e){return n(f,e),i(e)}(f.status>=400?i:o)(f)},(c=r.body)&&"object"==s(c)&&(l["content-type"]="application/json",c=JSON.stringify(c)),f.withCredentials=!!r.withCredentials,l)f.setRequestHeader(a,l[a]);f.send(c)})},t.get=t.send.bind(t.send,"GET"),t.post=t.send.bind(t.send,"POST"),t.patch=t.send.bind(t.send,"PATCH"),t.del=t.send.bind(t.send,"DELETE"),t.put=t.send.bind(t.send,"PUT")},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Room=void 0;var a=i(n(5)),c=n(21),u=n(22),h=n(23),f=n(6),l=n(7),p=i(n(8)),d=i(n(9)),v=function(){function e(e,t){var n=this;this.onJoin=c.createSignal(),this.onStateChange=c.createSignal(),this.onError=c.createSignal(),this.onLeave=c.createSignal(),this.hasJoined=!1,this.onMessageHandlers=u.createNanoEvents(),this.id=null,this.name=e,t?(this.serializer=new(f.getSerializer("schema")),this.rootSchema=t,this.serializer.state=new t):this.serializer=new(f.getSerializer("fossil-delta")),this.onError(function(e,t){return console.error("colyseus.js - onError => ("+e+") "+t)}),this.onLeave(function(){return n.removeAllListeners()})}return e.prototype.connect=function(e){var t=this;this.connection=new h.Connection(e,!1),this.connection.reconnectEnabled=!1,this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(e){if(!t.hasJoined)return console.error("Room connection was closed unexpectedly ("+e.code+"): "+e.reason),void t.onError.invoke(e.code,e.reason);t.onLeave.invoke(e.code)},this.connection.onerror=function(e){console.warn("Room, onError ("+e.code+"): "+e.reason),t.onError.invoke(e.code,e.reason)},this.connection.open()},e.prototype.leave=function(e){void 0===e&&(e=!0),this.connection?e?this.connection.send([l.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.invoke(4e3)},e.prototype.onMessage=function(e,t){return this.onMessageHandlers.on(this.getMessageHandlerKey(e),t)},e.prototype.send=function(e,t){var n,r=[l.Protocol.ROOM_DATA];if("string"==typeof e?p.string(r,e):p.number(r,e),void 0!==t){var o=a.encode(t);(n=new Uint8Array(r.length+o.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(o),r.length)}else n=new Uint8Array(r);this.connection.send(n.buffer)},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),e.prototype.listen=function(e,t,n){if("schema"!==this.serializerId)return this.serializerId||console.warn("room.Listen() should be called after room.onJoin has been called (DEPRECATION WARNING)"),this.serializer.api.listen(e,t,n);console.error("'"+this.serializerId+"' serializer doesn't support .listen() method here.")},e.prototype.removeListener=function(e){return this.serializer.api.removeListener(e)},e.prototype.removeAllListeners=function(){this.serializer&&this.serializer.teardown(),this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear()},e.prototype.onMessageCallback=function(e){var t=Array.from(new Uint8Array(e.data)),n=t[0];if(n===l.Protocol.JOIN_ROOM){var r=1;this.serializerId=l.utf8Read(t,r),r+=l.utf8Length(this.serializerId);var o=f.getSerializer(this.serializerId);if(!o)throw new Error("missing serializer: "+this.serializerId);"fossil-delta"===this.serializerId||this.rootSchema||(this.serializer=new o),t.length>r&&this.serializer.handshake&&this.serializer.handshake(t,{offset:1}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([l.Protocol.JOIN_ROOM])}else if(n===l.Protocol.ERROR){var i={offset:1},s=d.number(t,i),c=d.string(t,i);this.onError.invoke(s,c)}else if(n===l.Protocol.LEAVE_ROOM)this.leave();else if(n===l.Protocol.ROOM_DATA_SCHEMA)(c=new(h=this.serializer.getState().constructor._context.get(t[1]))).decode(t,{offset:2}),this.dispatchMessage(h,c);else if(n===l.Protocol.ROOM_STATE)t.shift(),this.setState(t);else if(n===l.Protocol.ROOM_STATE_PATCH)t.shift(),this.patch(t);else if(n===l.Protocol.ROOM_DATA){var u={offset:1},h=d.stringCheck(t,u)?d.string(t,u):d.number(t,u);c=t.length>u.offset?a.decode(e.data,u.offset):void 0,this.dispatchMessage(h,c)}},e.prototype.setState=function(e){this.serializer.setState(e),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(e){this.serializer.patch(e),this.onStateChange.invoke(this.serializer.getState())},e.prototype.dispatchMessage=function(e,t){var n=this.getMessageHandlerKey(e);this.onMessageHandlers.events[n]?this.onMessageHandlers.emit(n,t):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",e,t):console.warn("onMessage not registered for type '"+e+"'.")},e.prototype.getMessageHandlerKey=function(e){switch(s(e)){case"function":return"$"+e._typeid;case"string":return e;case"number":return"i"+e;default:throw new Error("invalid message type.")}},e}();t.Room=v},function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.decode=void 0;var o=r(n(19)),i=r(n(20));t.decode=o.default,t.encode=i.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getSerializer=t.registerSerializer=void 0;var r={};t.registerSerializer=function(e,t){r[e]=t},t.getSerializer=function(e){return r[e]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.utf8Length=t.utf8Read=t.ErrorCode=t.Protocol=void 0,function(e){e[e.HANDSHAKE=9]="HANDSHAKE",e[e.JOIN_ROOM=10]="JOIN_ROOM",e[e.ERROR=11]="ERROR",e[e.LEAVE_ROOM=12]="LEAVE_ROOM",e[e.ROOM_DATA=13]="ROOM_DATA",e[e.ROOM_STATE=14]="ROOM_STATE",e[e.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",e[e.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA"}(t.Protocol||(t.Protocol={})),function(e){e[e.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",e[e.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",e[e.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",e[e.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",e[e.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",e[e.AUTH_FAILED=4215]="AUTH_FAILED",e[e.APPLICATION_ERROR=4216]="APPLICATION_ERROR"}(t.ErrorCode||(t.ErrorCode={})),t.utf8Read=function(e,t){for(var n=e[t++],r="",o=0,i=t,s=t+n;i<s;i++){var a=e[i];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(o=(7&a)<<18|(63&e[++i])<<12|(63&e[++i])<<6|(63&e[++i])<<0)>=65536?(o-=65536,r+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):r+=String.fromCharCode(o)}else r+=String.fromCharCode((15&a)<<12|(63&e[++i])<<6|(63&e[++i])<<0);else r+=String.fromCharCode((31&a)<<6|63&e[++i]);else r+=String.fromCharCode(a)}return r},t.utf8Length=function(e){void 0===e&&(e="");for(var t=0,n=0,r=0,o=e.length;r<o;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n+1}},function(e,t,n){function r(e,t,n){for(var r=0,o=0,i=n.length;o<i;o++)(r=n.charCodeAt(o))<128?e[t++]=r:r<2048?(e[t++]=192|r>>6,e[t++]=128|63&r):r<55296||r>=57344?(e[t++]=224|r>>12,e[t++]=128|r>>6&63,e[t++]=128|63&r):(o++,r=65536+((1023&r)<<10|1023&n.charCodeAt(o)),e[t++]=240|r>>18,e[t++]=128|r>>12&63,e[t++]=128|r>>6&63,e[t++]=128|63&r)}function o(e,t){e.push(255&t)}function i(e,t){e.push(255&t)}function s(e,t){e.push(255&t),e.push(t>>8&255)}function a(e,t){e.push(255&t),e.push(t>>8&255)}function c(e,t){e.push(255&t),e.push(t>>8&255),e.push(t>>16&255),e.push(t>>24&255)}function u(e,t){var n=t>>24,r=t>>16,o=t>>8,i=t;e.push(255&i),e.push(255&o),e.push(255&r),e.push(255&n)}function h(e,t){var n=Math.floor(t/Math.pow(2,32));u(e,t>>>0),u(e,n)}function f(e,t){var n=t/Math.pow(2,32)>>0;u(e,t>>>0),u(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.utf8Write=r,t.int8=o,t.uint8=i,t.int16=s,t.uint16=a,t.int32=c,t.uint32=u,t.int64=h,t.uint64=f,t.float32=function(e,t){v(e,t)},t.float64=function(e,t){y(e,t)};var l=new Int32Array(2),p=new Float32Array(l.buffer),d=new Float64Array(l.buffer);function v(e,t){p[0]=t,c(e,l[0])}function y(e,t){d[0]=t,c(e,l[0]),c(e,l[1])}t.writeFloat32=v,t.writeFloat64=y,t.boolean=function(e,t){return i(e,t?1:0)},t.string=function(e,t){t||(t="");var n=function(e){for(var t=0,n=0,r=0,o=e.length;r<o;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t),o=0;if(n<32)e.push(160|n),o=1;else if(n<256)e.push(217),i(e,n),o=2;else if(n<65536)e.push(218),a(e,n),o=3;else{if(!(n<4294967296))throw new Error("String too long");e.push(219),u(e,n),o=5}return r(e,e.length,t),o+n},t.number=function e(t,n){return isNaN(n)?e(t,0):isFinite(n)?n!==(0|n)?(t.push(203),y(t,n),9):n>=0?n<128?(i(t,n),1):n<256?(t.push(204),i(t,n),2):n<65536?(t.push(205),a(t,n),3):n<4294967296?(t.push(206),u(t,n),5):(t.push(207),f(t,n),9):n>=-32?(t.push(n),1):n>=-128?(t.push(208),o(t,n),2):n>=-32768?(t.push(209),s(t,n),3):n>=-2147483648?(t.push(210),c(t,n),5):(t.push(211),h(t,n),9):e(t,n>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(10);function o(e,t){return i(e,t)<<24>>24}function i(e,t){return e[t.offset++]}function s(e,t){return a(e,t)<<16>>16}function a(e,t){return e[t.offset++]|e[t.offset++]<<8}function c(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function u(e,t){return c(e,t)>>>0}function h(e,t){var n=u(e,t);return c(e,t)*Math.pow(2,32)+n}function f(e,t){var n=u(e,t);return u(e,t)*Math.pow(2,32)+n}t.int8=o,t.uint8=i,t.int16=s,t.uint16=a,t.int32=c,t.uint32=u,t.float32=function(e,t){return v(e,t)},t.float64=function(e,t){return y(e,t)},t.int64=h,t.uint64=f;var l=new Int32Array(2),p=new Float32Array(l.buffer),d=new Float64Array(l.buffer);function v(e,t){return l[0]=c(e,t),p[0]}function y(e,t){return l[0]=c(e,t),l[1]=c(e,t),d[0]}t.readFloat32=v,t.readFloat64=y,t.boolean=function(e,t){return i(e,t)>0},t.string=function(e,t){var n,r=e[t.offset++];r<192?n=31&r:217===r?n=i(e,t):218===r?n=a(e,t):219===r&&(n=u(e,t));var o=function(e,t,n){for(var r="",o=0,i=t,s=t+n;i<s;i++){var a=e[i];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(o=(7&a)<<18|(63&e[++i])<<12|(63&e[++i])<<6|(63&e[++i])<<0)>=65536?(o-=65536,r+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):r+=String.fromCharCode(o)}else r+=String.fromCharCode((15&a)<<12|(63&e[++i])<<6|(63&e[++i])<<0);else r+=String.fromCharCode((31&a)<<6|63&e[++i]);else r+=String.fromCharCode(a)}return r}(e,t.offset,n);return t.offset+=n,o},t.stringCheck=function(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n},t.number=function(e,t){var n=e[t.offset++];return n<128?n:202===n?v(e,t):203===n?y(e,t):204===n?i(e,t):205===n?a(e,t):206===n?u(e,t):207===n?f(e,t):208===n?o(e,t):209===n?s(e,t):210===n?c(e,t):211===n?h(e,t):n>223?-1*(255-n+1):void 0},t.numberCheck=function(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211},t.arrayCheck=function(e,t){return e[t.offset]<160},t.nilCheck=function(e,t){return e[t.offset]===r.NIL},t.indexChangeCheck=function(e,t){return e[t.offset]===r.INDEX_CHANGE}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.END_OF_STRUCTURE=193,t.NIL=192,t.INDEX_CHANGE=212,t.TYPE_ID=213},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=t.Platform=void 0;var c=i(n(3)),u=n(27);!function(e){e.ios="ios",e.android="android"}(t.Platform||(t.Platform={}));var h=function(){function e(e){var t=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=e.replace("ws","http"),u.getItem("colyseus-auth-token",function(e){return t.token=e})}return Object.defineProperty(e.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),e.prototype.login=function(e){return void 0===e&&(e={}),s(this,void 0,void 0,function(){var t,n,r;return a(this,function(o){switch(o.label){case 0:return t=Object.assign({},e),this.hasToken&&(t.token=this.token),[4,this.request("post","/auth",t)];case 1:for(r in n=o.sent(),this.token=n.token,u.setItem("colyseus-auth-token",this.token),n)this.hasOwnProperty(r)&&(this[r]=n[r]);return this.registerPingService(),[2,this]}})})},e.prototype.save=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return e.sent(),[2,this]}})})},e.prototype.getFriends=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,e.sent()]}})})},e.prototype.getOnlineFriends=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,e.sent()]}})})},e.prototype.getFriendRequests=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,e.sent()]}})})},e.prototype.sendFriendRequest=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.request("post","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.acceptFriendRequest=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.request("put","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.declineFriendRequest=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.request("del","/friends/requests",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.blockUser=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.request("post","/friends/block",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.unblockUser=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.request("put","/friends/block",{userId:e})];case 1:return[2,t.sent()]}})})},e.prototype.request=function(e,t,n,r,o){return void 0===n&&(n={}),void 0===o&&(o={}),s(this,void 0,void 0,function(){var i,s,u,h;return a(this,function(a){switch(a.label){case 0:for(s in o.Accept="application/json",this.hasToken&&(o.Authorization="Bearer "+this.token),i=[],n)i.push(s+"="+n[s]);return u=i.length>0?"?"+i.join("&"):"",h={headers:o},r&&(h.body=r),[4,c[e](""+this.endpoint+t+u,h)];case 1:return[2,a.sent().data]}})})},e.prototype.logout=function(){this.token=void 0,u.removeItem("colyseus-auth-token"),this.unregisterPingService()},e.prototype.registerPingService=function(e){var t=this;void 0===e&&(e=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval(function(){return t.request("get","/auth")},e)},e.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},e}();t.Auth=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.Schema=r.Schema;var o=n(1);t.MapSchema=o.MapSchema;var i=n(0);t.ArraySchema=i.ArraySchema;var s=n(36);t.dumpChanges=s.dumpChanges;var a=n(37);t.Reflection=a.Reflection,t.ReflectionType=a.ReflectionType,t.ReflectionField=a.ReflectionField;var c=n(14);t.type=c.type,t.deprecated=c.deprecated,t.filter=c.filter,t.defineTypes=c.defineTypes,t.Context=c.Context},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),i=n(1),a=function(){function e(e,t,n){void 0===e&&(e={}),void 0===t&&(t=null),this.changed=!1,this.changes=new Set,this.allChanges=new Set,this.deletedKeys={},this.fieldIndexes=e,this.parent=n,this.parentField=t}return e.prototype.change=function(e,t){void 0===t&&(t=!1);var n=this.fieldIndexes[e],r="number"==typeof n?n:e;t?t&&(this.changed=!0,this.changes.add(r),this.allChanges.delete(r)):(this.changed=!0,this.changes.add(r),this.allChanges.add(r)),this.parent&&this.parent.change(this.parentField)},e.prototype.mapIndex=function(e,t){"object"==s(e)&&(this.indexMap||(this.indexMap=new Map,this.indexChange=new Map),this.indexMap.set(e,t))},e.prototype.getIndex=function(e){return this.indexMap&&this.indexMap.get(e)},e.prototype.deleteIndex=function(e){"object"==s(e)&&(this.deletedKeys[this.indexMap.get(e)]=!0,this.indexMap.delete(e))},e.prototype.isDeleted=function(e){return void 0!==this.deletedKeys[e]},e.prototype.mapIndexChange=function(e,t){"object"!=s(e)||this.indexChange.has(e)||this.indexChange.set(e,t)},e.prototype.getIndexChange=function(e){return this.indexChange&&this.indexChange.get(e)},e.prototype.deleteIndexChange=function(e){"object"==s(e)&&this.indexChange.delete(e)},e.prototype.changeAll=function(e){if(e instanceof r.Schema){var t=e._schema;for(var n in t)(e[n]instanceof r.Schema||e[n]instanceof o.ArraySchema||e[n]instanceof i.MapSchema)&&!e[n].$changes.parent.parent&&(e[n].$changes.parent=this),void 0!==e[n]&&this.change(n)}else for(var s=0,a=Object.keys(e);s<a.length;s++){var c=a[s];void 0!==e[c]&&this.change(c)}},e.prototype.discard=function(){this.changed=!1,this.changes.clear(),this.deletedKeys={},this.indexChange&&this.indexChange.clear()},e.prototype.clone=function(){return new e(this.fieldIndexes,this.parentField,void 0)},e}();t.ChangeTree=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(2),i=function(){function e(){this.types={},this.schemas=new Map}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e){e._typeid=this.schemas.size,this.types[e._typeid]=e,this.schemas.set(e,e._typeid)},e}();function s(e,n){return void 0===n&&(n=t.globalContext),function(t,i){var s=t.constructor;s._context=n,n.has(s)||(n.add(s),s._schema=Object.assign({},s._schema||{}),s._indexes=Object.assign({},s._indexes||{}),s._fieldsByIndex=Object.assign({},s._fieldsByIndex||{}),s._descriptors=Object.assign({},s._descriptors||{}),s._deprecated=Object.assign({},s._deprecated||{}));var a=Object.keys(s._schema).length;if(s._fieldsByIndex[a]=i,s._indexes[i]=a,s._schema[i]=e,!s._descriptors[i]){var c=Array.isArray(e),u=!c&&e.map,h="function"==typeof s._schema[i],f="_"+i;s._descriptors[f]={enumerable:!1,configurable:!1,writable:!0},s._descriptors[i]={get:function(){return this[f]},set:function(e){if((c||u)&&(e=new Proxy(e,{get:function(e,t){return e[t]},set:function(e,t,n){if("length"!==t&&0!==t.indexOf("$")){var i=c?Number(t):String(t);if(!e.$sorting){var s=e.$changes.getIndex(n);void 0!==s&&e.$changes.mapIndexChange(n,s),e.$changes.mapIndex(n,i)}n instanceof o.Schema?n.$changes.parent||(n.$changes=new r.ChangeTree(n._indexes,i,e.$changes),n.$changes.changeAll(n)):e[t]=n,e.$changes.change(i)}else e[t];return e[t]=n,!0},deleteProperty:function(e,t){var n=e[t];u&&void 0!==n&&(e.$changes.deleteIndex(n),e.$changes.deleteIndexChange(n),n.$changes&&delete n.$changes.parent),delete e[t];var r=c?Number(t):String(t);return e.$changes.change(r,!0),!0}})),e!==this[f])if(this[f]=e,c){this.$changes.change(i),e.$changes=new r.ChangeTree({},i,this.$changes);for(var t=0;t<e.length;t++)e[t]instanceof o.Schema&&(e[t].$changes=new r.ChangeTree(e[t]._indexes,t,e.$changes),e[t].$changes.changeAll(e[t])),e.$changes.mapIndex(e[t],t),e.$changes.change(t)}else if(u)for(var n in e.$changes=new r.ChangeTree({},i,this.$changes),this.$changes.change(i),e)e[n]instanceof o.Schema&&(e[n].$changes=new r.ChangeTree(e[n]._indexes,n,e.$changes),e[n].$changes.changeAll(e[n])),e.$changes.mapIndex(e[n],n),e.$changes.change(n);else h?(this.$changes.change(i),e&&(e.$changes=new r.ChangeTree(e._indexes,i,this.$changes),e.$changes.changeAll(e))):this.$changes.change(i)},enumerable:!0,configurable:!0}}}}t.Context=i,t.globalContext=new i,t.type=s,t.filter=function(e){return function(t,n){var r=t.constructor;r._filters||(r._filters={}),r._filters[n]=e}},t.deprecated=function(e,n){return void 0===e&&(e=!0),void 0===n&&(n=t.globalContext),function(t,n){var r=t.constructor;r._deprecated[n]=!0,e&&(r._descriptors[n]={get:function(){throw new Error(n+" is deprecated.")},set:function(e){},enumerable:!1,configurable:!0})}},t.defineTypes=function(e,n,r){for(var o in void 0===r&&(r=t.globalContext),n)s(n[o],r)(e.prototype,o);return e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaSerializer=t.FossilDeltaSerializer=t.registerSerializer=void 0,n(16);var r=n(17);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return r.Client}});var o=n(7);Object.defineProperty(t,"Protocol",{enumerable:!0,get:function(){return o.Protocol}}),Object.defineProperty(t,"ErrorCode",{enumerable:!0,get:function(){return o.ErrorCode}});var i=n(4);Object.defineProperty(t,"Room",{enumerable:!0,get:function(){return i.Room}});var s=n(11);Object.defineProperty(t,"Auth",{enumerable:!0,get:function(){return s.Auth}}),Object.defineProperty(t,"Platform",{enumerable:!0,get:function(){return s.Platform}});var a=n(29);Object.defineProperty(t,"FossilDeltaSerializer",{enumerable:!0,get:function(){return a.FossilDeltaSerializer}});var c=n(34);Object.defineProperty(t,"SchemaSerializer",{enumerable:!0,get:function(){return c.SchemaSerializer}});var u=n(6);Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return u.registerSerializer}}),u.registerSerializer("fossil-delta",a.FossilDeltaSerializer),u.registerSerializer("schema",c.SchemaSerializer)},function(e,t){ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return null!==e&&"object"==s(e)&&e.buffer instanceof ArrayBuffer})},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.MatchMakeError=void 0;var a=n(3),c=n(18),u=n(4),h=n(11),f=n(28),l=function(e){function t(n,r){var o=e.call(this,n)||this;return o.code=r,Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t}(Error);t.MatchMakeError=l;var p=function(){function e(e){void 0===e&&(e=location.protocol.replace("http","ws")+"//"+location.hostname+(location.port&&":"+location.port)),this.endpoint=e,this.auth=new h.Auth(this.endpoint),this.push=new f.Push(this.endpoint)}return e.prototype.joinOrCreate=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.create=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("create",e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.join=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("join",e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.joinById=function(e,t,n){return void 0===t&&(t={}),i(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,t,n)];case 1:return[2,r.sent()]}})})},e.prototype.reconnect=function(e,t,n){return i(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("joinById",e,{sessionId:t},n)];case 1:return[2,r.sent()]}})})},e.prototype.getAvailableRooms=function(e){return void 0===e&&(e=""),i(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return t=this.endpoint.replace("ws","http")+"/matchmake/"+e,[4,a.get(t,{headers:{Accept:"application/json"}})];case 1:return[2,n.sent().data]}})})},e.prototype.consumeSeatReservation=function(e,t){return i(this,void 0,void 0,function(){var n;return s(this,function(r){return(n=this.createRoom(e.room.name,t)).id=e.room.roomId,n.sessionId=e.sessionId,n.connect(this.buildEndpoint(e.room,{sessionId:n.sessionId})),[2,new Promise(function(e,t){var r=function(e,n){return t(new c.ServerError(e,n))};n.onError.once(r),n.onJoin.once(function(){n.onError.remove(r),e(n)})})]})})},e.prototype.createMatchMakeRequest=function(e,t,n,r){return void 0===n&&(n={}),i(this,void 0,void 0,function(){var o,i;return s(this,function(s){switch(s.label){case 0:return o=this.endpoint.replace("ws","http")+"/matchmake/"+e+"/"+t,this.auth.hasToken&&(n.token=this.auth.token),[4,a.post(o,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((i=s.sent().data).error)throw new l(i.error,i.code);return[2,this.consumeSeatReservation(i,r)]}})})},e.prototype.createRoom=function(e,t){return new u.Room(e,t)},e.prototype.buildEndpoint=function(e,t){void 0===t&&(t={});var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r+"="+t[r]);return this.endpoint+"/"+e.processId+"/"+e.roomId+"?"+n.join("&")},e}();t.Client=p},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ServerError=void 0;var i=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name="ServerError",r.code=t,r}return o(t,e),t}(Error);t.ServerError=i},function(e,t,n){function r(e,t){if(this._offset=t,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw new Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype._array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this._parse();return t},r.prototype._map=function(e){for(var t={},n=0;n<e;n++)t[this._parse()]=this._parse();return t},r.prototype._str=function(e){var t=function(e,t,n){for(var r="",o=0,i=t,s=t+n;i<s;i++){var a=e.getUint8(i);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(o=(7&a)<<18|(63&e.getUint8(++i))<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0)>=65536?(o-=65536,r+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):r+=String.fromCharCode(o)}else r+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++i))<<6|(63&e.getUint8(++i))<<0);else r+=String.fromCharCode((31&a)<<6|63&e.getUint8(++i));else r+=String.fromCharCode(a)}return r}(this._view,this._offset,e);return this._offset+=e,t},r.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},r.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),n=0,r=0,o=0,i=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),r=this._view.getInt8(this._offset+1),this._offset+=2,[r,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),r=this._view.getInt8(this._offset+2),this._offset+=3,[r,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),r=this._view.getInt8(this._offset+4),this._offset+=5,[r,this._bin(n)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return o=this._view.getUint32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,o+i;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return o=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,o+i;case 212:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?void(this._offset+=1):[r,this._bin(1)];case 213:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(2)];case 214:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(4)];case 215:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?(o=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(o+i)):[r,this._bin(8)];case 216:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")},t.default=function(e,t){void 0===t&&(t=0);var n=new r(e,t),o=n._parse();if(n._offset!==e.byteLength)throw new Error(e.byteLength-n._offset+" trailing bytes");return o}},function(e,t,n){function r(e,t,n){for(var r=0,o=0,i=n.length;o<i;o++)(r=n.charCodeAt(o))<128?e.setUint8(t++,r):r<2048?(e.setUint8(t++,192|r>>6),e.setUint8(t++,128|63&r)):r<55296||r>=57344?(e.setUint8(t++,224|r>>12),e.setUint8(t++,128|r>>6&63),e.setUint8(t++,128|63&r)):(o++,r=65536+((1023&r)<<10|1023&n.charCodeAt(o)),e.setUint8(t++,240|r>>18),e.setUint8(t++,128|r>>12&63),e.setUint8(t++,128|r>>6&63),e.setUint8(t++,128|63&r))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=[],o=function e(t,n,r){var o=s(r),i=0,a=0,c=0,u=0,h=0,f=0;if("string"===o){if((h=function(e){for(var t=0,n=0,r=0,o=e.length;r<o;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(r))<32)t.push(160|h),f=1;else if(h<256)t.push(217,h),f=2;else if(h<65536)t.push(218,h>>8,h),f=3;else{if(!(h<4294967296))throw new Error("String too long");t.push(219,h>>24,h>>16,h>>8,h),f=5}return n.push({_str:r,_length:h,_offset:t.length}),f+h}if("number"===o)return Math.floor(r)===r&&isFinite(r)?r>=0?r<128?(t.push(r),1):r<256?(t.push(204,r),2):r<65536?(t.push(205,r>>8,r),3):r<4294967296?(t.push(206,r>>24,r>>16,r>>8,r),5):(c=r/Math.pow(2,32)>>0,u=r>>>0,t.push(207,c>>24,c>>16,c>>8,c,u>>24,u>>16,u>>8,u),9):r>=-32?(t.push(r),1):r>=-128?(t.push(208,r),2):r>=-32768?(t.push(209,r>>8,r),3):r>=-2147483648?(t.push(210,r>>24,r>>16,r>>8,r),5):(c=Math.floor(r/Math.pow(2,32)),u=r>>>0,t.push(211,c>>24,c>>16,c>>8,c,u>>24,u>>16,u>>8,u),9):(t.push(203),n.push({_float:r,_length:8,_offset:t.length}),9);if("object"===o){if(null===r)return t.push(192),1;if(Array.isArray(r)){if((h=r.length)<16)t.push(144|h),f=1;else if(h<65536)t.push(220,h>>8,h),f=3;else{if(!(h<4294967296))throw new Error("Array too large");t.push(221,h>>24,h>>16,h>>8,h),f=5}for(i=0;i<h;i++)f+=e(t,n,r[i]);return f}if(r instanceof Date){var l=r.getTime();return c=Math.floor(l/Math.pow(2,32)),u=l>>>0,t.push(215,0,c>>24,c>>16,c>>8,c,u>>24,u>>16,u>>8,u),10}if(r instanceof ArrayBuffer){if((h=r.byteLength)<256)t.push(196,h),f=2;else if(h<65536)t.push(197,h>>8,h),f=3;else{if(!(h<4294967296))throw new Error("Buffer too large");t.push(198,h>>24,h>>16,h>>8,h),f=5}return n.push({_bin:r,_length:h,_offset:t.length}),f+h}if("function"==typeof r.toJSON)return e(t,n,r.toJSON());var p=[],d="",v=Object.keys(r);for(i=0,a=v.length;i<a;i++)"function"!=typeof r[d=v[i]]&&p.push(d);if((h=p.length)<16)t.push(128|h),f=1;else if(h<65536)t.push(222,h>>8,h),f=3;else{if(!(h<4294967296))throw new Error("Object too large");t.push(223,h>>24,h>>16,h>>8,h),f=5}for(i=0;i<h;i++)f+=e(t,n,d=p[i]),f+=e(t,n,r[d]);return f}if("boolean"===o)return t.push(r?195:194),1;if("undefined"===o)return t.push(212,0,0),3;throw new Error("Could not encode")}(t,n,e),i=new ArrayBuffer(o),a=new DataView(i),c=0,u=0,h=-1;n.length>0&&(h=n[0]._offset);for(var f,l=0,p=0,d=0,v=t.length;d<v;d++)if(a.setUint8(u+d,t[d]),d+1===h){if(l=(f=n[c])._length,p=u+h,f._bin)for(var y=new Uint8Array(f._bin),g=0;g<l;g++)a.setUint8(p+g,y[g]);else f._str?r(a,p,f._str):void 0!==f._float&&a.setFloat64(p,f._float);u+=l,n[++c]&&(h=n[c]._offset)}return i}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){return void 0===t&&(t=!1),this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){return t.apply(void 0,e)})},e.prototype.invokeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.handlers.map(function(t){return t.apply(void 0,e)}))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}();t.EventEmitter=r,t.createSignal=function(){var e=new r;function t(t){return e.register(t,null===this)}return t.once=function(t){e.register(function n(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t.apply(void 0,r),e.remove(n)})},t.remove=function(t){return e.remove(t)},t.invoke=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invoke.apply(e,t)},t.invokeAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.invokeAsync.apply(e,t)},t.clear=function(){return e.clear()},t}},function(e,t,n){n.r(t),n.d(t,"createNanoEvents",function(){return o});var o=function(){return{events:{},emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i,s=r(this.events[e]||[]);try{for(s.s();!(i=s.n()).done;){i.value.apply(void 0,n)}}catch(e){s.e(e)}finally{s.f()}},on:function(e,t){var n=this;return(this.events[e]=this.events[e]||[]).push(t),function(){return n.events[e]=n.events[e].filter(function(e){return e!==t})}}}}},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var s=i(n(24)),a=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t,void 0,{connect:n})||this;return r._enqueuedCalls=[],r}return o(t,e),t.prototype.onOpenCallback=function(t){if(e.prototype.onOpenCallback.call(this),this.binaryType="arraybuffer",this._enqueuedCalls.length>0){for(var n=0,r=this._enqueuedCalls;n<r.length;n++){var o=r[n],i=o[0],s=o[1];this[i].apply(this,s)}this._enqueuedCalls=[]}},t.prototype.send=function(t){if(this.ws.readyState===s.default.OPEN){if(t instanceof ArrayBuffer)return e.prototype.send.call(this,t);if(Array.isArray(t))return e.prototype.send.call(this,new Uint8Array(t).buffer)}else this._enqueuedCalls.push(["send",[t]])},t}(s.default);t.Connection=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(25).createBackoff,s="undefined"!=typeof WebSocket?WebSocket:n(26),a=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.url=t,this.protocols=n,this.reconnectEnabled=!0,this.listeners={},this.backoff=i(r.backoff||"exponential",r),this.backoff.onReady=this.onBackoffReady.bind(this),(void 0===r.connect||r.connect)&&this.open()}return r(e,[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReconnect=e;var t=this.ws&&this.ws.binaryType;this.ws=new s(this.url,this.protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this),t&&(this.ws.binaryType=t)}},{key:"onBackoffReady",value:function(e,t){this.open(!0)}},{key:"onCloseCallback",value:function(e){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&e.code<3e3&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(e,t){void 0===e&&(e=1e3),this.reconnectEnabled=!1,this.ws.close(e,t)}},{key:"send",value:function(e){this.ws.send(e)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(e){this.ws.binaryType=e}},{key:"extensions",get:function(){return this.ws.extensions},set:function(e){this.ws.extensions=e}},{key:"protocol",get:function(){return this.ws.protocol},set:function(e){this.ws.protocol=e}},{key:"onclose",set:function(e){this.listeners.onclose=e},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(e){this.listeners.onerror=e},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(e){this.listeners.onmessage=e},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(e){this.listeners.onopen=e},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(e){this.listeners.onreconnect=e},get:function(){return this.listeners.onreconnect}}]),e}();a.CONNECTING=s.CONNECTING,a.OPEN=s.OPEN,a.CLOSING=s.CLOSING,a.CLOSED=s.CLOSED,t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createBackoff=function(e,t){return new o(r[e],t)};var r={exponential:function(e,t){return Math.floor(Math.random()*Math.pow(2,e)*t)},fibonacci:function(e,t){if(e>(r=1))for(var n=1,r=2,o=2;o<e;o++){var i=n+r;n=r,r=i}return Math.floor(Math.random()*r*t)}};function o(e,t){this.func=e,this.attempts=0,this.delay=void 0!==t.initialDelay?t.initialDelay:100}o.prototype.backoff=function(){setTimeout(this.onReady,this.func(++this.attempts,this.delay))}},function(e,t){},function(e,t,n){var r;function o(){return r||(r="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.getItem=t.removeItem=t.setItem=void 0,t.setItem=function(e,t){o().setItem(e,t)},t.removeItem=function(e){o().removeItem(e)},t.getItem=function(e,t){var n=o().getItem(e);"undefined"!=typeof Promise&&n instanceof Promise?n.then(function(e){return t(e)}):t(n)}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Push=void 0;var i=function(){function e(e){this.endpoint=e.replace("ws","http")}return e.prototype.register=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.check(),[4,this.registerServiceWorker()];case 1:return e.sent(),[4,this.requestNotificationPermission()];case 2:return e.sent(),[2]}})})},e.prototype.registerServiceWorker=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,navigator.serviceWorker.register(this.endpoint+"/push")];case 1:return[2,e.sent()]}})})},e.prototype.requestNotificationPermission=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,window.Notification.requestPermission()];case 1:if("granted"!==e.sent())throw new Error("Permission not granted for Notification");return[2]}})})},e.prototype.check=function(){if(!("serviceWorker"in navigator))throw new Error("No Service Worker support!");if(!("PushManager"in window))throw new Error("No Push API Support!")},e}();t.Push=i},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FossilDeltaSerializer=void 0;var s=n(30),a=i(n(33)),c=i(n(5)),u=function(){function e(){this.api=new s.StateContainer({})}return e.prototype.getState=function(){return this.api.state},e.prototype.setState=function(e){this.previousState=new Uint8Array(e),this.api.set(c.decode(this.previousState))},e.prototype.patch=function(e){this.previousState=new Uint8Array(a.apply(this.previousState,e)),this.api.set(c.decode(this.previousState))},e.prototype.teardown=function(){this.api.removeAllListeners()},e}();t.FossilDeltaSerializer=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.StateContainer=r.StateContainer},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),o=function(){function e(e){this.listeners=[],this.matcherPlaceholders={":id":/^([a-zA-Z0-9\-_]+)$/,":number":/^([0-9]+)$/,":string":/^(\w+)$/,":axis":/^([xyz])$/,":*":/(.*)/},this.state=e,this.reset()}return e.prototype.set=function(e){var t=r.compare(this.state,e);return this.state=e,this.checkPatches(t,this.listeners,this.defaultListener),t},e.prototype.registerPlaceholder=function(e,t){this.matcherPlaceholders[e]=t},e.prototype.listen=function(e,t,n){var o,i=this;"function"==typeof e?(o=[],t=e):o=e.split("/"),t.length>1&&console.warn(".listen() accepts only one parameter.");var s={callback:t,rawRules:o,rules:o.map(function(e){return"string"==typeof e?0===e.indexOf(":")?i.matcherPlaceholders[e]||i.matcherPlaceholders[":*"]:new RegExp("^"+e+"$"):e})};return 0===o.length?this.defaultListener=s:this.listeners.push(s),n&&this.checkPatches(r.compare({},this.state),[s]),s},e.prototype.removeListener=function(e){for(var t=this.listeners.length-1;t>=0;t--)this.listeners[t]===e&&this.listeners.splice(t,1)},e.prototype.removeAllListeners=function(){this.reset()},e.prototype.checkPatches=function(e,t,n){for(var r=0,o=t.length;r<o;r++)for(var i=t[r],s=e.length-1;s>=0;s--){var a=i&&this.getPathVariables(e[s],i);a&&(i.callback({path:a,rawPath:e[s].path,operation:e[s].operation,value:e[s].value}),e[s].matched=!0)}if(n)for(s=e.length-1;s>=0;s--)e[s].matched||n.callback(e[s])},e.prototype.getPathVariables=function(e,t){if(e.path.length!==t.rules.length)return!1;for(var n={},r=0,o=t.rules.length;r<o;r++){var i=e.path[r].match(t.rules[r]);if(!i||0===i.length||i.length>2)return!1;":"===t.rawRules[r].substr(0,1)&&(n[t.rawRules[r].substr(1)]=i[1])}return n},e.prototype.reset=function(){this.listeners=[]},e}();t.StateContainer=o},function(e,t,n){function r(e,t){var n=e.slice();return n.push(t),n}function o(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(o);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.compare=function(e,t){var n=[];return function e(t,n,i,a){for(var c=o(n),u=o(t),h=!1,f=u.length-1;f>=0;f--){var l=u[f],p=t[l];if(!n.hasOwnProperty(l)||void 0===n[l]&&void 0!==p&&!1===Array.isArray(n))i.push({operation:"remove",path:r(a,l)}),h=!0;else{var d=n[l];"object"==s(p)&&null!=p&&"object"==s(d)&&null!=d?e(p,d,i,r(a,l)):p!==d&&i.push({operation:"replace",path:r(a,l),value:d,previousValue:p})}}if(h||c.length!=u.length)for(f=c.length-1;f>=0;f--)if(l=c[f],!t.hasOwnProperty(l)&&void 0!==n[l]){d=n[l];var v=r(a,l);"object"==s(d)&&null!=d&&e({},d,i,v),i.push({operation:"add",path:v,value:d})}}(e,t,n,[]),n}},function(e,t,n){var r;r=function(){var e={};function t(){this.a=0,this.b=0,this.i=0,this.z=new Array(16)}t.prototype.init=function(e,t){var n,r,o=0,i=0;for(n=0;n<16;n++)o=o+(r=e[t+n])&65535,i=i+(16-n)*r&65535,this.z[n]=r;this.a=65535&o,this.b=65535&i,this.i=0},t.prototype.next=function(e){var t=this.z[this.i];this.z[this.i]=e,this.i=this.i+1&15,this.a=this.a-t+e&65535,this.b=this.b-16*t+this.a&65535},t.prototype.value=function(){return(65535&this.a|(65535&this.b)<<16)>>>0};var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~".split("").map(function(e){return e.charCodeAt(0)}),r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];function o(e){this.a=e,this.pos=0}function i(){this.a=[]}function s(e){var t,n;for(t=1,n=64;e>=n;t++,n<<=6);return t}function a(e){for(var t=0,n=0,r=0,o=0,i=0,s=e.length;s>=16;)t=t+e[i+0]|0,n=n+e[i+1]|0,r=r+e[i+2]|0,o=o+e[i+3]|0,t=t+e[i+4]|0,n=n+e[i+5]|0,r=r+e[i+6]|0,o=o+e[i+7]|0,t=t+e[i+8]|0,n=n+e[i+9]|0,r=r+e[i+10]|0,o=o+e[i+11]|0,t=t+e[i+12]|0,n=n+e[i+13]|0,r=r+e[i+14]|0,o=o+e[i+15]|0,i+=16,s-=16;for(;s>=4;)t=t+e[i+0]|0,n=n+e[i+1]|0,r=r+e[i+2]|0,o=o+e[i+3]|0,i+=4,s-=4;switch(o=((o+(r<<8)|0)+(n<<16)|0)+(t<<24)|0,s){case 3:o=o+(e[i+2]<<8)|0;case 2:o=o+(e[i+1]<<16)|0;case 1:o=o+(e[i+0]<<24)|0}return o>>>0}return o.prototype.haveBytes=function(){return this.pos<this.a.length},o.prototype.getByte=function(){var e=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return e},o.prototype.getChar=function(){return String.fromCharCode(this.getByte())},o.prototype.getInt=function(){for(var e,t=0;this.haveBytes()&&(e=r[127&this.getByte()])>=0;)t=(t<<6)+e;return this.pos--,t>>>0},i.prototype.toArray=function(){return this.a},i.prototype.putByte=function(e){this.a.push(255&e)},i.prototype.putChar=function(e){this.putByte(e.charCodeAt(0))},i.prototype.putInt=function(e){var t,r,o=[];if(0!==e){for(t=0;e>0;t++,e>>>=6)o.push(n[63&e]);for(r=t-1;r>=0;r--)this.putByte(o[r])}else this.putChar("0")},i.prototype.putArray=function(e,t,n){for(var r=t;r<n;r++)this.a.push(e[r])},e.create=function(e,n){var r,o=new i,c=n.length,u=e.length,h=-1;if(o.putInt(c),o.putChar("\n"),u<=16)return o.putInt(c),o.putChar(":"),o.putArray(n,0,c),o.putInt(a(n)),o.putChar(";"),o.toArray();var f=Math.ceil(u/16),l=new Array(f),p=new Array(f);for(r=0;r<l.length;r++)l[r]=-1;for(r=0;r<p.length;r++)p[r]=-1;var d,v=new t;for(r=0;r<u-16;r+=16)v.init(e,r),d=v.value()%f,l[r/16]=p[d],p[d]=r/16;for(var y,g,_,m,b,w=0;w+16<c;)for(m=0,b=0,v.init(n,w),r=0,_=0;;){var C=250;for(g=p[d=v.value()%f];g>=0&&C-- >0;){var A,O,k,E,S,R,M;for(E=0,R=y=16*g,M=w+r;R<u&&M<c&&e[R]===n[M];E++,R++,M++);for(E--,S=1;S<y&&S<=r&&e[y-S]===n[w+r-S];S++);O=y- --S,k=r-S,(A=E+S+1)>=s(r-S)+s(A)+s(O)+3&&A>_&&(_=A,m=y-S,b=k),g=l[g]}if(_>0){b>0&&(o.putInt(b),o.putChar(":"),o.putArray(n,w,w+b),w+=b),w+=_,o.putInt(_),o.putChar("@"),o.putInt(m),o.putChar(","),m+_-1>h&&(h=m+_-1),_=0;break}if(w+r+16>=c){o.putInt(c-w),o.putChar(":"),o.putArray(n,w,w+c-w),w=c;break}v.next(n[w+r+16]),r++}return w<c&&(o.putInt(c-w),o.putChar(":"),o.putArray(n,w,w+c-w)),o.putInt(a(n)),o.putChar(";"),o.toArray()},e.outputSize=function(e){var t=new o(e),n=t.getInt();if("\n"!==t.getChar())throw new Error("size integer not terminated by '\\n'");return n},e.apply=function(e,t,n){var r,s=0,c=new o(t),u=e.length,h=t.length;if(r=c.getInt(),"\n"!==c.getChar())throw new Error("size integer not terminated by '\\n'");for(var f=new i;c.haveBytes();){var l,p;switch(l=c.getInt(),c.getChar()){case"@":if(p=c.getInt(),c.haveBytes()&&","!==c.getChar())throw new Error("copy command not terminated by ','");if((s+=l)>r)throw new Error("copy exceeds output file size");if(p+l>u)throw new Error("copy extends past end of input");f.putArray(e,p,p+l);break;case":":if((s+=l)>r)throw new Error("insert command gives an output larger than predicted");if(l>h)throw new Error("insert count exceeds size of delta");f.putArray(c.a,c.pos,c.pos+l),c.pos+=l;break;case";":var d=f.toArray();if((!n||!1!==n.verifyChecksum)&&l!==a(d))throw new Error("bad checksum");if(s!==r)throw new Error("generated size does not match predicted size");return d;default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")},e},e.exports?e.exports=r():this.fossilDelta=r()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaSerializer=void 0;var r=n(12),o=function(){function e(){}return e.prototype.setState=function(e){this.state.decode(e)},e.prototype.getState=function(){return this.state},e.prototype.patch=function(e){this.state.decode(e)},e.prototype.teardown=function(){},e.prototype.handshake=function(e,t){this.state?(new r.Reflection).decode(e,t):this.state=r.Reflection.decode(e)},e}();t.SchemaSerializer=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){return void 0===t&&(t=!1),this.handlers.push(e),this},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.handlers.forEach(function(t){return t.apply(void 0,e)})},e.prototype.invokeAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.all(this.handlers.map(function(t){return t.apply(void 0,e)}))},e.prototype.remove=function(e){var t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()},e.prototype.clear=function(){this.handlers=[]},e}();t.EventEmitter=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(1),i=n(0);t.dumpChanges=function e(t){for(var n={},s=t.$changes,a=t._fieldsByIndex||{},c=0,u=Array.from(s.changes);c<u.length;c++){var h=u[c],f=a[h]||h;t[f]instanceof o.MapSchema||t[f]instanceof i.ArraySchema||t[f]instanceof r.Schema?n[f]=e(t[f]):n[f]=t[f]}return n}},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),c=n(2),u=n(0),h=n(1),f=new a.Context,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),i([a.type("string",f)],t.prototype,"name",void 0),i([a.type("string",f)],t.prototype,"type",void 0),i([a.type("uint8",f)],t.prototype,"referencedType",void 0),t}(c.Schema);t.ReflectionField=l;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new u.ArraySchema,t}return o(t,e),i([a.type("uint8",f)],t.prototype,"id",void 0),i([a.type([l],f)],t.prototype,"fields",void 0),t}(c.Schema);t.ReflectionType=p;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new u.ArraySchema,t}return o(t,e),t.encode=function(e){var n=e.constructor,r=new t;r.rootType=n._typeid;var o=function(e,t){for(var n in t){var o=new l;o.name=n;var i=void 0;if("string"==typeof t[n])i=t[n];else{var s="function"==typeof t[n],a=Array.isArray(t[n]),c=!a&&t[n].map,u=void 0;s?(i="ref",u=t[n]):a?(i="array","string"==typeof t[n][0]?i+=":"+t[n][0]:u=t[n][0]):c&&(i="map","string"==typeof t[n].map?i+=":"+t[n].map:u=t[n].map),o.referencedType=u?u._typeid:255}o.type=i,e.fields.push(o)}r.types.push(e)},i=n._context.types;for(var s in i){var a=new p;a.id=Number(s),o(a,i[s]._schema)}return r.encodeAll()},t.decode=function(e){var n=new a.Context,r=new t;r.decode(e);var i=r.types.reduce(function(e,t){return e[t.id]=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(c.Schema),e},{});r.types.forEach(function(e,t){e.fields.forEach(function(t){var r=i[e.id];if(void 0!==t.referencedType){var o=i[t.referencedType];o||(o=t.type.split(":")[1]),0===t.type.indexOf("array")?a.type([o],n)(r.prototype,t.name):0===t.type.indexOf("map")?a.type({map:o},n)(r.prototype,t.name):"ref"===t.type&&a.type(o,n)(r.prototype,t.name)}else a.type(t.type,n)(r.prototype,t.name)})});var s=i[r.rootType],f=new s;for(var l in s._schema){var p=s._schema[l];if("string"!=typeof p){var d="function"==typeof p,v=Array.isArray(p),y=!v&&p.map;f[l]=v?new u.ArraySchema:y?new h.MapSchema:d?new p:void 0}}return f},i([a.type([p],f)],t.prototype,"types",void 0),i([a.type("uint8",f)],t.prototype,"rootType",void 0),t}(c.Schema);t.Reflection=d}])}),cc._RF.pop()},{}],"elephant-fish":[function(e,t,n){"use strict";cc._RF.push(t,"c203esfkzlCbrqKVLwvxmkM","elephant-fish"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[0,3])})}}),cc._RF.pop()},{}],"elephant-tiger":[function(e,t,n){"use strict";cc._RF.push(t,"0dd7fNq5FRKzZaZKZ8XygDu","elephant-tiger"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[0,1])})}}),cc._RF.pop()},{}],"elephant-tortoise":[function(e,t,n){"use strict";cc._RF.push(t,"86d9d4abI5BPbiCtXzxcHdM","elephant-tortoise"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[0,4])})}}),cc._RF.pop()},{}],elephant:[function(e,t,n){"use strict";cc._RF.push(t,"e18d3HFcC1F1q4UJk26RpcA","elephant"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",0)}),console.log(this.node.children)},addBetCoins:function(){var e=cc.instantiate(this.coin);this.node.addChild(e),e.setPosition(12,12)}}),cc._RF.pop()},{}],"fish-chicken":[function(e,t,n){"use strict";cc._RF.push(t,"c3897GAC/pJZ7JH+yXv5Uap","fish-chicken"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[2,3])})}}),cc._RF.pop()},{}],"fish-prawn":[function(e,t,n){"use strict";cc._RF.push(t,"361a068odVA5ruczICzbGJ6","fish-prawn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[3,5])})}}),cc._RF.pop()},{}],"fish-tortoise":[function(e,t,n){"use strict";cc._RF.push(t,"5ba0a80LClOcY7M8usmvBBD","fish-tortoise"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[3,4])})}}),cc._RF.pop()},{}],fish:[function(e,t,n){"use strict";cc._RF.push(t,"63b3a+cO4lLvr2TTDCKPnBc","fish"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",3)})}}),cc._RF.pop()},{}],game:[function(e,t,n){"use strict";cc._RF.push(t,"89d98l8mKtGerxQxq65GpFe","game");var r=e("colyseus");cc.Class({extends:cc.Component,properties:{gameCD:{default:null,type:cc.Label},playerCount:{default:null,type:cc.Label},message:{default:null,type:cc.Label},result:{default:null,type:cc.Label},userName:{default:null,type:cc.Label},userMoney:{default:null,type:cc.Label},coin:{default:null,type:cc.Prefab},elephant:{default:null,type:cc.Node},tiger:{default:null,type:cc.Node},chicken:{default:null,type:cc.Node},fish:{default:null,type:cc.Node},tiger_chicken:{default:null,type:cc.Node},elephant_tiger:{default:null,type:cc.Node},elephant_fish:{default:null,type:cc.Node},fish_tortoise:{default:null,type:cc.Node},tortoise:{default:null,type:cc.Node},tiger_tortoise:{default:null,type:cc.Node},chicken_prawn:{default:null,type:cc.Node},tortoise_prawn:{default:null,type:cc.Node},prawn:{default:null,type:cc.Node},elephant_tiger1:{default:null,type:cc.Node},tiger_tortoise1:{default:null,type:cc.Node},fish_prawn:{default:null,type:cc.Node},chicken_fish:{default:null,type:cc.Node},elephant_tortoise:{default:null,type:cc.Node},elephant_fish1:{default:null,type:cc.Node},chicken_prawn1:{default:null,type:cc.Node},tiger_prawn:{default:null,type:cc.Node},moving_betcoins:{default:null,type:cc.Node},bet_amount:{default:null,type:cc.Node},bet_picker:{default:null,type:cc.Node},openBowl:{default:null,type:cc.Node}},addBetCoins:function(e){var t=cc.instantiate(this.coin);e.addChild(t),t.setPosition(0,0)},play:function(e,t){if(""!=this.betamount){this.chosenNode=t,this.isBetted=!0,this.room.send("play",{animal:e,amount:this.betamount});var n=this.moving_betcoins.getComponent("moving-betcoins");console.log(t.name),n.createPlatform(t.name)}else window.alert("You Already Bet")},onLoad:function(){var e=this;this.animate=this.openBowl.getComponent("openBowl"),this.bet_picker.on("changeBet",function(){e.bet_amount.getComponent("bet-amount").init()}),this.bet_amount.on("betamount",function(t){console.log("hii",t),e.bet_picker.getComponent("bet-picker").changeSprite(t),e.betamount=t}),this.fish_tortoise.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.fish_tortoise)}),this.tiger_prawn.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tiger_prawn)}),this.chicken_prawn1.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.chicken_prawn1)}),this.elephant_fish1.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.elephant_fish1)}),this.elephant_tortoise.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.elephant_tortoise)}),this.chicken_fish.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.chicken_fish)}),this.fish_prawn.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.fish_prawn)}),this.tiger_tortoise1.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tiger_tortoise1)}),this.prawn.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.prawn)}),this.tortoise_prawn.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tortoise_prawn)}),this.chicken_prawn.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.chicken_prawn)}),this.tiger_tortoise.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tiger_tortoise)}),this.tortoise.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tortoise)}),this.elephant_fish.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.elephant_fish)}),this.elephant.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.elephant)}),this.tiger.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tiger)}),this.chicken.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.chicken)}),this.fish.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.fish)}),this.tiger_chicken.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.tiger_chicken)}),this.elephant_tiger.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.elephant_tiger)}),this.elephant_tiger1.on("play",function(t){e.isBetted?window.alert("Your bet is already set"):e.play(t,e.elephant_tiger1)}),this.isBetted=!1,this.user="Inf1290",this.currentMoney=2e3,this.betamount=50,this.userName.string=this.user,this.userMoney.string=this.currentMoney.toString(),this.client=new r.Client("wss://animal-server.herokuapp.com/"),this.client.joinOrCreate("DOG",{userName:this.user,currentMoney:this.currentMoney}).then(function(t){console.log("joined successfully",t),e.room=t,e.joinSuccess()}).catch(function(e){console.log("join error:\n",e)})},joinSuccess:function(){var e=this;console.log("asasd-",this.room.id,this.room.state),this.room.state.onChange=function(t){switch(console.log(t),e.playerCount.string=Object.keys(e.room.state.players).length,e.gameCD.string=e.room.state.gameCountDown.toString(),e.room.state.gameCountDown){case 0:console.log(e.room.state.gameCountDown),e.animate.animate("stop");break;case 10:console.log(e.room.state.gameCountDown),e.animate.animate("closing_bowl");break;case 9:e.animate.animate("bowl_to_girl");break;case 8:e.animate.animate("shaking");break;case 6:e.animate.animate("waiting");break;case 5:e.animate.animate("girl_to_bowl");break;case 4:e.animate.animate("open_bowl")}},this.room.onMessage("result",function(t){console.log("data received from server"),console.log(t),e.result.string=t.result.join(",")}),this.room.onMessage("played",function(t){console.log("user got result played"),e.userMoney.string=t.amount.toString(),e.message.string=t.message,e.chosenNode=null,e.isBetted=!1}),this.room.onMessage("timeout",function(t){e.message.string=t,e.chosenNode=null,e.isBetted=!1})},start:function(){},removeCoins:function(){this.elephant.removeAllChildren(),this.elephant_tiger.removeAllChildren(),this.tiger.removeAllChildren(),this.chicken.removeAllChildren(),this.tiger_chicken.removeAllChildren(),this.elephant_fish.removeAllChildren(),this.fish.removeAllChildren(),this.fish_tortoise.removeAllChildren(),this.tortoise.removeAllChildren(),this.tiger_tortoise.removeAllChildren(),this.chicken_prawn.removeAllChildren(),this.tortoise_prawn.removeAllChildren(),this.prawn.removeAllChildren(),this.elephant_tiger1.removeAllChildren(),this.tiger_tortoise1.removeAllChildren(),this.fish_prawn.removeAllChildren(),this.chicken_fish.removeAllChildren(),this.elephant_tortoise.removeAllChildren(),this.elephant_fish1.removeAllChildren(),this.chicken_prawn1.removeAllChildren(),this.tiger_prawn.removeAllChildren()},update:function(e){switch(this.chosenNode){case this.elephant:case this.tiger:case this.chicken:case this.elephant_fish:case this.elephant_tiger:case this.tiger_chicken:case this.fish:case this.fish_tortoise:case this.tortoise:case this.tiger_tortoise:case this.chicken_prawn:case this.tortoise_prawn:case this.prawn:case this.elephant_tiger1:case this.tiger_tortoise1:case this.fish_prawn:case this.chicken_fish:case this.elephant_tortoise:case this.elephant_fish1:case this.chicken_prawn1:case this.tiger_prawn:this.addBetCoins(this.chosenNode);break;default:this.removeCoins(),this.moving_betcoins.getComponent("moving-betcoins").remove()}}}),cc._RF.pop()},{colyseus:"colyseus"}],"moving-betcoins":[function(e,t,n){"use strict";cc._RF.push(t,"3541dQW5YVPtZwTorNIUwBY","moving-betcoins"),cc.Class({extends:cc.Component,properties:{movingcoin:{default:null,type:cc.Prefab}},onLoad:function(){},start:function(){},createPlatform:function(e){cc.log("create");var t=cc.instantiate(this.movingcoin);this.node.addChild(t),this.currentCoin=t.getComponent("bet-coin"),this.currentCoin.init(e)},remove:function(){this.node.removeAllChildren()}}),cc._RF.pop()},{}],openBowl:[function(e,t,n){"use strict";cc._RF.push(t,"04e22lxJ7lDn4POTi3mQBuO","openBowl"),cc.Class({extends:cc.Component,properties:{bowl:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.animation=this.node.getComponent(cc.Animation),this.sprite=this.node.getComponent(cc.Sprite)},start:function(){},animate:function(e){switch(console.log("animation is running"),e){case"shaking":this.animation.play("shaking");break;case"closing_bowl":this.animation.play("closing_bowl");break;case"bowl_to_girl":this.animation.play("bowl_to_girl");break;case"waiting":this.animation.play("waiting");break;case"girl_to_bowl":this.animation.play("girl_to_bowl");break;case"open_bowl":this.animation.play("open_bowl");break;case"stop":this.sprite.spriteFrame=this.bowl,this.animation.stop()}}}),cc._RF.pop()},{}],prawn:[function(e,t,n){"use strict";cc._RF.push(t,"bf045MGO1ZO/Lhieeav49Bj","prawn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",5)})}}),cc._RF.pop()},{}],"tiger-chicken":[function(e,t,n){"use strict";cc._RF.push(t,"7ca17HHbetAlJbotFM3GiUH","tiger-chicken"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[1,2])})}}),cc._RF.pop()},{}],"tiger-prawn":[function(e,t,n){"use strict";cc._RF.push(t,"bb266LFQ3RJ1KF4i115+2fZ","tiger-prawn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[1,5])})}}),cc._RF.pop()},{}],"tiger-tortoise":[function(e,t,n){"use strict";cc._RF.push(t,"14496g9Al5HioYIhRc5Lz0D","tiger-tortoise"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[1,4])})}}),cc._RF.pop()},{}],tiger:[function(e,t,n){"use strict";cc._RF.push(t,"d9d44GBES1PRLJN4Zcl4kWz","tiger"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",1)})}}),cc._RF.pop()},{}],"tortoise-prawn":[function(e,t,n){"use strict";cc._RF.push(t,"3221fbTIjxEtbMMXJeSQBEm","tortoise-prawn"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",[4,5])})}}),cc._RF.pop()},{}],tortoise:[function(e,t,n){"use strict";cc._RF.push(t,"e9dfa/HdOpCzaGAd14tHvak","tortoise"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.emit("play",4)})}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t,n){"use strict";cc._RF.push(t,"e0dca+wFcxHOaPWKwRdsVwU","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["colyseus","use_v2.0.x_cc.Toggle_event","bet-amount","bet-coin","bet-picker","chicken-prawn","chicken","coin20","coin30","coin50","elephant-fish","elephant-tiger","elephant-tortoise","elephant","fish-chicken","fish-prawn","fish-tortoise","fish","game","moving-betcoins","openBowl","prawn","tiger-chicken","tiger-prawn","tiger-tortoise","tiger","tortoise-prawn","tortoise"]);